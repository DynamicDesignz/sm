#!/usr/bin/env bash

modules project

[[ -s "$extension_templates_path/bdsmrc" ]] || \
  fail "$extension_templates_path/bdsmrc template is missing."

if [[ -s "$HOME/.bdsmrc" ]] ; then
  timestamp=$(date +%m.%d.%Y-%H:%M:%S)

  log "Found an existing $HOME/.bdsmrc file! "
  log "Preserving it as ${HOME}/.bdsmrc.${timestamp}"

  move "$HOME/.bdsmrc" to "$HOME/.bdsmrc.$timestamp"
fi

true \
  ${repository_url:="git@github.com:username/repository.git"}

\sed \
  -e "s#{{project}}#$project#g" \
  -e "s#{{repository_url}}#$repository_url#g" \
  -e "s#{{environment}}#$environment#g" \
  "$extension_templates_path/bdsmrc" \
  > "$HOME/.bdsmrc"
