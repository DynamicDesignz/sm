#!/usr/bin/env bash

list_help()
{
  log "

Usage:

  bdsm extension list <action>

Actions:

  installed - List installed extensions
  available - List available extensions
  help      - Show this help text

"
}

list_installed()
{
  local ext_path extensions
  for ext_path in ${extensions_search_paths[@]}
  do
    extensions_in $ext_path
    extensions=( ${found_extensions[@]} )

    if array_is_nonempty extensions
    then
      log "Extensions installed in ${ext_path##$bdsm_path\/extensions\/}:\n"
      echo ${extensions[@]} | xargs -s 76 | xargs -I '{}' echo "  {}"
      echo ""
    else
      log "# No ${ext_path##$bdsm_path\/extensions\/} extensions currently installed.\n"
    fi
  done
}

list_uris()
{
  log "BDSM: Not implemented yet" #$(cat $bdsm_path/.uri)"
  log "BDSM internal extensions: $(cat $bdsm_path/extensions/internal/.uri)"
  extensions_in $bdsm_path/extensions/external
  for extension in ${found_extensions[@]}
  do
    log "BDSM external extension $extension: $(cat $bdsm_path/extensions/external/$extension/.uri)"
  done
}

list_available()
{
  NIY "available external extensions repo"
}
