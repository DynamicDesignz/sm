#!/usr/bin/env bash

list_help()
{
  log "

Usage:

  bdsm extension list <action>

Actions:

  installed - List installed extensions
  available - List available extensions
  help      - Show this help text

"
}

list_installed()
{
  extensions=($(installed_extensions))
  if [[ ${#extensions[@]} -gt 0 ]] ; then
    log "${extensions[@]}"
  else
    log "# No extensions currently installed."
  fi
}

list_available()
{
  [[ -d "${extensions_src_path}" ]] || fetch_extensions_repository

  extensions=($(available_extensions))
  if [[ ${#extensions[@]} -gt 0 ]] ; then
    log "${extensions[@]}"
  else
    fail "No extensions found. Run 'bdsm extensions clone' to make them available. ( ${src_path} )\n"
  fi
}

extension_action=${extension_args[0]}

case "$extension_action" in
  installed)
    list_installed
  ;;

  available)
    list_available
  ;;

  help|usage)
    list_help
  ;;

  *)
    fail "$(list_help)"
  ;;
esac

exit 0
