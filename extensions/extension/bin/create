#!/usr/bin/env bash

[[ ${#extension_args[@]} -gt 0 ]] || \
  fail "At least one extension name must be specified."


for extension in ${extension_args[@]} ; do

  [[ -d "$extensions_path/extension" ]] &&
    fail "Extension '$extension' already exists at ${extensions_path}/${extension}."

  [[ -d "${extensions_path}/extension/templates/${language}" ]] ||
    fail "Extension template files for are missing from $extensions_path/extension/templates/${language}."

  (
  enter "$extensions_path/extension/templates/${language:-bash}"

  copy_directories_to "$extensions_path/$extension/" \
    bin modules templates

  copy_files_to "$extensions_path/$extension/" \
    README.md VERSION
  )

  log "Extension created from template at ${extensions_path}/${extension}/"

done

succeed "Created extensions ${extension_args[@]}"
