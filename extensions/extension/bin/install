#!/usr/bin/env bash

[[ ${#extension_args[@]} -gt 0 ]] || \
  fail "At least one extension must be specified."

case "${extension_version:-head}" in
  *([[:digit:]]).*([[:digit:]]).*([[:digit:]]))
    fetch_tarball
    ;;

  head|master)
    fetch_repository # default is head
    ;;
esac

for _extension in "${extension_args[@]}" ; do
  extension_src_path="${extensions_src_path}/${_extension}" \

  if [[ -s "${extension_src_path}/VERSION" && -x "${extension_src_path}/bin/help" ]] ; then
    cp -Rf \
      "${extension_src_path}" \
      "$bdsm_path/extensions/"
  else
    error "${extension_src_path}/${extension} is not a proper extension."
  fi
done

