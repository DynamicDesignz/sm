#!/bin/sh

extension_path()
{
  local path extension="${1:-}"
  shift || fail "Cannot process extension path;"\
    " No extension name was given."

  for path in ${extensions_search_paths[@]}
  do
    if [[ -d "${path}/${extension}/actions" || -d "${path}/${extension}/modules" ]]
    then
      extension_path="${path}/${extension}"
      return 0
    fi
  done
  return 1
}

extension_is_valid()
{
  local _path="${1:-}"

  shift || fail "Cannot check if extension is valid;"\
    " No extension path was given."

  [[ -n "${_path}" ]] ||
    fail "Cannot determine if an extension is valid, as the path to the extension was not given."

  [[ -d "${_path}/actions" ]] # Realistically, all an extension needs is actions
}

detect_extension_existence()
{
  extensions_path="${1:-}" extension="${2:-}"
  shift || fail "Cannot detect extension existence;"\
    " No extension path was given."
  shift || fail "Cannot detect extension existence;"\
    " No extension name was given."
  extension_is_valid $extensions_path/$extension
}
