#!/usr/bin/env bash

# The default prefix is /usr/local;
# this should be set in /etc/smrc to wherever BDSM is installed.

# TODO: --prefix=... parameter
if [[ -z "${sm_path:-}" ]]
then
  if (( UID == 0 ))
  then
    prefix_path="/"
    sm_path="/"
  else
    prefix_path=""
    sm_path="$HOME/.sm"
  fi
fi

# set BDSM basic paths
install_path="${sm_path}" # Path to install everything to.
archives_path="${sm_path}/archives"
scm_path="${sm_path}/scm"
src_path="${sm_path}/src"
extension_sets_home="${sm_path}/sets"
extension_exts_home="${sm_path}/exts"

export install_path prefix_path archives_path scm_path src_path extension_sets_home

exec "${PWD}/local" --call=install/install_sm "$@"

