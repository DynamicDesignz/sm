#!/bin/bash

# TODO: --prefix=... parameter
if [[ -z "${sm_path:-}" ]]
then
  if (( UID == 0 ))
  then
    sm_path="${DESTROOT:-}/sm"
  else
    sm_path="${DESTROOT:-}$HOME/.sm"
  fi
fi

# set BDSM basic paths
install_path="${sm_path}" # Path to install everything to.
archives_path="${sm_path}/archives"
scm_path="${sm_path}/scm"
src_path="${sm_path}/src"
extension_sets_home="${sm_path}/sets"
extension_exts_home="${sm_path}/exts"

export install_path archives_path scm_path src_path extension_sets_home DESTROOT

exec "${PWD}/local" --call=install/install_sm "$@"

