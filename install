#!/usr/bin/env bash

# Load BDSM bash DSL functions and initialize for BDSM core itself manually.
source "./bash/bdsm/functions"
source "./bash/bdsm/initialize"

modules filesystem

directories=(bin modules config extensions)

(
  cd "${bdsm_path}"
  ensure_paths_exist "${directories[@]}"
)

copy_directories_to "${bdsm_path}" \
  "${directories[@]}"

copy_files_to "${bdsm_path}" \
  LICENCE \
  VERSION \
  README

ensure_files_exist \
  "${config_path}/user" \
  "${config_path}/db"

remove_files \
  "${prefix}/bin/bdsm"

link  "${bin_path}/bdsm" to "${prefix}/bin/bdsm"

